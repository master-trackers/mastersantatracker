function getFlagImageUrl(t){return t.startsWith("http://")||t.startsWith("https://")?t:`https://flagcdn.com/w320/${t.toLowerCase()}.png`}async function getMaxPresents(){try{return(await(await fetch("/getmaxpresents")).json()).basketDelivered}catch(t){return console.error("Error fetching max presents:",t),0}}var source;async function getCurrentCityIndex(){try{return(await(await fetch("/getindex")).json()).index}catch(t){return console.error("Error fetching current city index:",t),0}}var timeleft2,presentsdeliverednumber=1/0;async function updatePresentsDelivered(){var t=await getMaxPresents(),t=Number(t);presentsdeliverednumber=t}updatePresentsDelivered();let countryCode="US";async function getLatLongFromIPAddress(){var t,e;if(localStorage.getItem("storedIP"))return t=localStorage.getItem("latitude"),e=localStorage.getItem("longitude"),{latitude:parseFloat(t),longitude:parseFloat(e)};try{var n=await(await fetch("https://ipapi.co/json/")).json();return localStorage.setItem("storedIP",!0),localStorage.setItem("latitude",n.latitude),localStorage.setItem("longitude",n.longitude),{latitude:n.latitude,longitude:n.longitude}}catch(t){return console.error("Error getting latitude and longitude:",t),null}}var stopped=!1;function openDonationScreen(){var t=document.createElement("iframe"),e=(t.src="/donationiframe",t.style.position="fixed",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.width="90vw",t.style.height="90vh",t.style.border="none",t.style.zIndex="9999",document.createElement("button"));e.textContent="x",e.style.position="absolute",e.style.top="100px",e.style.right="10px",e.style.padding="5px",e.style.background="rgba(0, 0, 0, 0.5)",e.style.color="#fff",e.style.border="none",e.style.borderRadius="50%",e.style.cursor="pointer",e.style.zIndex="10000",e.onclick=function(){document.body.removeChild(t),document.body.removeChild(e)},document.body.appendChild(t),document.body.appendChild(e)}function openSubscriptionScreen(){var t=document.createElement("iframe"),e=(t.src="/emails/subscribe",t.style.position="fixed",t.style.backgroundColor="white",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.width="90vw",t.style.height="90vh",t.style.border="none",t.style.zIndex="9999",document.createElement("button"));e.textContent="x",e.style.position="absolute",e.style.top="100px",e.style.right="10px",e.style.padding="5px",e.style.background="rgba(0, 0, 0)",e.style.color="#fff",e.style.border="none",e.style.borderRadius="50%",e.style.cursor="pointer",e.style.zIndex="10000",e.onclick=function(){document.body.removeChild(t),document.body.removeChild(e)},document.body.appendChild(t),document.body.appendChild(e)}async function getTimeUntilArrival(t,e){try{return await(await fetch(`/gettimeuntilarrival?lat=${t}&long=`+e)).json()}catch(t){return console.error("Error getting time until arrival:",t),null}}function formatTimeUntilArrival(t){var e;return(t/=3600)<1?(e=Math.round(60*t))%15==0?e/60+" hours":0===Math.ceil(t)?"Less than 15 minutes!":(Math.floor(e/15),Math.round(t)+" hours"):1==t?"1 hour":(e=Math.floor(t),0===(t=Math.round(60*(t-e)))?e+" "+(1===e?"hour":"hours"):15===t?e+" 1/4 hours":30===t?e+" 1/2 hours":45===t?e+" 3/4 hours":e+` ${Math.round(t/15)}/4 hours`)}async function main(){try{var t,e,{latitude:n,longitude:a}=await getLatLongFromIPAddress();n&&a?({nearestCity:t,timeUntilArrival:e}=await getTimeUntilArrival(n,a),localStorage.setItem("nearestcity",t),document.getElementById("arrivalTime").innerText=0<=e?"Santa will arrive in: "+formatTimeUntilArrival(e):`Santa arrived ${formatTimeUntilArrival(-e)} ago`):console.error("Latitude and longitude not available.")}catch(t){console.error("An error occurred:",t)}}main(),setInterval(main,1e3);var LOCATIONHID,url=new URL(window.location.href),zoom=6,isPanning=!0,map=L.map("map-container",{center:[-27.1127,-109.3497],zoom:7,worldCopyJump:!0});function startCountdown(t){let r=document.getElementById("countdownButton"),i=(document.getElementById("chatPopup"),new Date(t)),s=(i.setDate(i.getDate()-1),i.setUTCHours(8,0,0,0),setInterval(function(){var t,e,n,a,o=(new Date).getTime();(o=i.getTime()-o)<0?(clearInterval(s),document.querySelectorAll(".flip-digit").forEach(t=>t.textContent="00")):(t=Math.floor(o/864e5),e=Math.floor(o%864e5/36e5),n=Math.floor(o%36e5/6e4),a=Math.floor(o%6e4/1e3),t<=5&&(r.style.display="block"),6<=t&&(r.style.display="none"),document.getElementById("days").textContent=padNumber(t),document.getElementById("hours").textContent=padNumber(e),document.getElementById("minutes").textContent=padNumber(n),document.getElementById("seconds").textContent=padNumber(a)),o<0&&(clearInterval(timerInterval),r.style.display="none")},1e3))}function handleChatSSE(t){let e=JSON.parse(t.data).message;"[object pointerevent]"===e.toLowerCase()&&(t=Math.floor(1e4*Math.random()),e="Anonymous User "+t+":"),appendMessage(e)}async function getMaxPresents(){try{return(await(await fetch("/getmaxpresents")).json()).maxpresents}catch(t){return console.error("Error fetching max presents:",t),0}}async function getCurrentCityIndex(){try{return(await(await fetch("/getindex")).json()).index}catch(t){return console.error("Error fetching current city index:",t),0}}async function updatePresentsDelivered(){await getMaxPresents(),await getCurrentCityIndex()}function checkLocationHid(){var t=localStorage.getItem("locationHid");LOCATIONHID="true"===t,(t=document.getElementById("hidelocation")).style.display=LOCATIONHID?"none":"block"}function startChatSSE(){}function sendMessage(t){fetch("/chatsend?message="+encodeURIComponent(t)).then(t=>{if(!t.ok)throw new Error("Failed to send message")}).catch(t=>{console.error("Error sending message:",t)})}function appendMessage(t){var e=document.getElementById("chatMessages"),n=document.createElement("div");n.textContent=t,e.appendChild(n)}function handleSendButtonClick(){var t=document.getElementById("userInput"),e=t.value.trim();""!==e&&(sendMessage(e),t.value="")}closeButton.addEventListener("click",()=>{chatPopup.style.display="none"}),countdownButton.addEventListener("click",()=>{chatPopup.style.display="block"}),updatePresentsDelivered(),checkLocationHid(),window.addEventListener("storage",function(t){"locationHid"===t.key&&checkLocationHid()});var iscurrentlydelivering=!1;function handleCloseButtonClick(){document.getElementById("chatPopup").style.display="none"}document.getElementById("sendButton").addEventListener("click",handleSendButtonClick),document.getElementById("closeButton").addEventListener("click",handleCloseButtonClick),startChatSSE();var santaMarker,zoom2=parseInt(zoom)||2,nobaskets=url.searchParams.get("nobaskets");function setTileLayerFromLocalStorage(){var t;switch(localStorage.getItem("mapType")){case"satellite":t="https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}";break;case"hybrid":t="https://{s}.google.com/vt/lyrs=y&x={x}&y={y}&z={z}";break;case"GeoportailFrance_orthos":t="https://data.geopf.fr/wmts?REQUEST=GetTile&SERVICE=WMTS&VERSION=1.0.0&STYLE=normal&TILEMATRIXSET=PM&FORMAT=image/jpeg&LAYER=ORTHOIMAGERY.ORTHOPHOTOS&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}";break;case"USGS_USImageryTopo":t="https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryTopo/MapServer/tile/{z}/{y}/{x}";break;case"Stadia_AlidadeSatellite":t="https://tiles.stadiamaps.com/tiles/alidade_satellite/{z}/{x}/{y}.jpg";break;case"Water":t="http://c.tile.stamen.com/watercolor/{z}/{x}/{y}.jpg";break;default:t="https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png"}L.tileLayer(t,{attribution:'&copy; <span id="year"></span> Master Bunny Tracker contributors',maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]}).addTo(map)}async function getLastCoordinatesAndSpawnSanta(){try{var t=await fetch("/getlastcords"),e=await t.json();t.ok?(spawnSanta(e.latitude,e.longitude),console.log("Santa spawned at last coordinates.")):(spawnSanta(83.6,168),console.log("Santa spawned at default coordinates."))}catch(t){console.error("Error fetching last coordinates:",t)}}function spawnSanta(t,e){santaMarker?santaMarker.setLatLng([t+.5,e-.37]):santaMarker=L.marker([t+.5,e-.37],{icon:L.icon({iconUrl:"https://github.com/Haydenlogs/sources/blob/main/image-removebg-preview%20(3).png?raw=true",iconSize:[50,50],iconAnchor:[25,25]}),zIndexOffset:99999999}).addTo(map)}function updateTweenSpeedText(t){t=Math.round(500*t).toLocaleString(),document.getElementById("tween-speed").textContent=!1===stopped?"0 mph":t+" mph."}function createSnowflake(){let t=document.createElement("div");t.textContent="*",t.style.position="absolute",t.style.color="#fff",t.style.fontSize=20*Math.random()+10+"px",t.style.left=Math.random()*window.innerWidth+"px",t.style.top="-10%",t.style.animationName="fall",t.style.animationDuration=2*Math.random()+1+"s",t.style.animationTimingFunction="ease-in",t.style.opacity=""+Math.random(),t.style.zIndex="99999999999",document.body.appendChild(t),t.addEventListener("animationend",()=>{t.remove()})}function createConfetti(){let t=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"],e=document.createElement("div");e.textContent="â€¢",e.style.position="absolute",e.style.color=t[Math.floor(Math.random()*t.length)],e.style.fontSize=20*Math.random()+10+"px",e.style.left=Math.random()*window.innerWidth+"px",e.style.top="-10%",e.style.animationName="fall",e.style.animationDuration=4*Math.random()+1+"s",e.style.animationTimingFunction="ease-out",document.body.appendChild(e),e.addEventListener("animationend",()=>{e.remove()})}function startSnowEffect(){let t=setInterval(createSnowflake,1);setTimeout(()=>{clearInterval(t)},432e5)}function checkTimeAndStartConfetti(){var t=new Date,e=t.getHours(),n=t.getMinutes();t.getSeconds(),0===e&&0===n?(console.log("It's 12:00 AM. Starting confetti effect!"),startConfetti(),setTimeout(()=>{console.log("Stopping confetti effect after 3 minutes."),clearInterval(confettiInterval)},18e4)):(console.log("Not 12:00 AM yet."),setTimeout(checkTimeAndStartConfetti,6e4))}function startConfetti(){let t=setInterval(createConfetti,1);setTimeout(()=>{clearInterval(t)},18e4)}"1"===nobaskets?console.log("NO BASKETS"):fetchBaskets(),null===zoom||isNaN(zoom2)||map.setZoom(parseInt(zoom2)),setTileLayerFromLocalStorage(),window.addEventListener("storage",function(t){"mapType"===t.key&&(map.eachLayer(function(t){t instanceof L.TileLayer&&map.removeLayer(t)}),setTileLayerFromLocalStorage())}),getLastCoordinatesAndSpawnSanta();let style=document.createElement("style");style.textContent=`
    @keyframes fall {
        from {
            transform: translateY(-10%);
        }
        to {
            transform: translateY(100vh);
        }
    }
`,document.head.appendChild(style);var lastUpdateTime=currenttimeunixsec;let tweeningInterval,tweeningSteps=1e4,GIFTSDELIVERED=0,symbolImage=document.getElementById("symbolImage");function toggleSymbol(){isPanning=isPanning?!(symbolImage.src="data:image/jpeg;base64,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"):(symbolImage.src="https://github.com/Haydenlogs/sources/blob/main/image_2024-07-15_102605601.png?raw=true",!0)}let basketUpdateInterval,basketElement=document.getElementById("basketsInfo"),currentCountry,currentCount=0;function startBasketCounter(e,n,a,o){if(currentCountry!==e){currentCountry=e,clearInterval(basketUpdateInterval),n=Number(n),a=Number(a),o=Number(o),currentCount=a,basketElement.textContent=currentCount.toLocaleString(),e=Math.ceil(1e3*n/10);let t=(o-a)/e;function r(){timesamount=1,currentCount<o?((currentCount+=t*timesamount)>=presentsdeliverednumber&&(window.location.href="/",source.close()),basketElement.textContent=Math.round(currentCount).toLocaleString()):clearInterval(basketUpdateInterval)}r(),basketUpdateInterval=setInterval(r,10)}}function updateBasket(t){updatePresents(t=Math.floor(t/1004)),console.log("Updated "+t+" baskets")}function updatePresents(t){console.log("Updating presents with "+t+" baskets")}var presentsDelivered=0,interval=setInterval(function(){++presentsDelivered%1004==0&&updateBasket(presentsDelivered),1e4===presentsDelivered&&(clearInterval(interval),console.log("Simulation ended"))},10);async function farmdata(t){parseFloat(t.lastCity.basketsdelivered),parseFloat(t.nextCity.basketsdelivered),t.timeLeft,t.currentCity.country}function handleSSE(t){var e=(t=JSON.parse(t.data)).currentCity.country;!0===data.trackerended&&window.open("/"),e!==lastCountry&&(startTimeLeft=t.timeLeft,lastCountry=e)}let previousNextCity=null;var zoomamount,iszoomedalready=!1,moving=!0,maxpresents1=fetchMaxPresents();function debounce(t,e){let n;return function(){clearTimeout(n),n=setTimeout(t,e)}}let nextLatLng;function handleSSE(t){console.log(nextLatLng),!0===(t=JSON.parse(t.data)).trackerEnded&&(console.log("ENDED"),yourFunctionToRunWhenTrackerEnds());var e=getFlagImageUrl(t.nextCity.cc),e=(console.log(e),document.getElementById("flag").src=e,getFlagImageUrl(t.lastCity.cc));function n(t){return"pt"!==t.toLowerCase()}if(console.log(e),document.getElementById("flag2").src=e,startBasketCounter(t.nextCity.country+t.nextCity.city,t.timeLeft,t.lastCity.basketsdelivered,t.nextCity.basketsdelivered),"pt"===t.lastCity.country?(setInterval(()=>{var t,e=new Date,n=new Date(e);n.setUTCHours(9,0,0,0),9<=e.getUTCHours()&&n.setUTCDate(e.getUTCDate()+1),(n-=e)<0||(e=Math.floor(n%864e5/36e5),t=Math.floor(n%36e5/6e4),n=Math.floor(n%6e4/1e3),document.getElementById("launchTimer").textContent=e.toString().padStart(2,"0")+":"+t.toString().padStart(2,"0")+":"+n.toString().padStart(2,"0"))},1e3),document.getElementById("hideavailable").hidden=!0,document.getElementById("launchID").hidden=!1):(document.getElementById("hideavailable").hidden=!1,document.getElementById("launchID").hidden=!0),document.getElementById("nextCityInfo").textContent=t.nextCity?t.timeLeft<=parseInt(t.currentCity.Arrival_Stoppage_Time)||!t.nextCity.country.endsWith('"')||!t.nextCity.country.includes("pt")?`${t.nextCity.city.replace(/^"(.*)"$/,"$1")}, ${t.nextCity.country.replace(/^"(.*)"$/,"$1")} in ${(t=>{var e=Math.floor(t/31536e3),n=(t-=3600*e*24*365,Math.floor(t/86400)),a=(t-=3600*n*24,Math.floor(t/3600)),o=(t-=3600*a,Math.floor(t/60));t-=60*o;let r="";return 0<e&&(r+=e+` year${1<e?"s":""} `),0<n&&(r+=n+` day${1<n?"s":""} `),0<a&&(r+=a+` hour${1<a?"s":""} `),0<o&&(r+=o+` minute${1<o?"s":""} `),0<t&&(r+=t+" second"+(1<t?"s":"")),r.trim()})(t.timeLeft)}.`:""+t.nextCity.country.replace(/^"(.*)"$/,"$1"):"",t.timeLeft<=parseInt(t.currentCity.Arrival_Stoppage_Time)?(stopped=moving=!(iscurrentlydelivering=!0),"https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExb2tuOW43cnV4a3ltbm9jZmxiNzcycTgycGl3anN2OHVhcG0wanp0NCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9cw/0z3sfa0imiLkBTxaFi/giphy.webp"!==santaMarker.options.icon.options.iconUrl&&santaMarker.setIcon(L.icon({iconUrl:"https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExb2tuOW43cnV4a3ltbm9jZmxiNzcycTgycGl3anN2OHVhcG0wanp0NCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9cw/0z3sfa0imiLkBTxaFi/giphy.webp",iconSize:[50,50],iconAnchor:[25,25]})),santaMarker.setLatLng([t.nextCity.latitude,t.nextCity.longitude])):(moving=stopped=!(iscurrentlydelivering=!1),santaMarker.setIcon(L.icon({iconUrl:"https://github.com/Haydenlogs/sources/blob/main/image-removebg-preview%20(3).png?raw=true",iconSize:[50,50],iconAnchor:[25,25]})),!1===iszoomedalready&&(iszoomedalready=!0)),timeleft2=t.timeLeft,document.getElementById("lastCityInfo").textContent=t.lastCity?`${t.lastCity.city}${e=t.lastCity.country,e.toLowerCase().includes("pt")?"":","} `+((e=t.lastCity.country).endsWith("pt")?e.slice(0,-2):e.replace(/"/g,"")):"",console.log(n(t.lastCity.country)),0==n(t.lastCity.country)?document.getElementById("hideavailable").style.display="none":document.getElementById("hideavailable").style.display="block",GIFTSDELIVERED=t.presentsDelivered,nobaskets||t.lastCity&&addBasket(t.lastCity),t.currentCity&&t.nextCity&&t.lastCity){let n=santaMarker.getLatLng();"International Space Station"===t.nextCity.city?debounce(()=>{fetch("http://api.open-notify.org/iss-now.json").then(t=>t.json()).then(t=>{var{latitude:t,longitude:e}=t.iss_position;nextLatLng=L.latLng(t,e)}).catch(t=>console.error("Error fetching ISS coordinates:",t))},1e3)():nextLatLng=L.latLng(t.nextCity.latitude,t.nextCity.longitude);var e=nextLatLng.lat-n.lat,l=nextLatLng.lng-n.lng;Math.sqrt(e**2+l**2);let a=1e3*t.timeLeft-t.nextCity.Arrival_Stoppage_Time,o=tweeningSteps,r=e/o*5,i=l/o*5,s=0;e=t.nextCity,JSON.stringify(e)!==JSON.stringify(previousNextCity)&&(console.log("Next city has changed"),previousNextCity=e,lastUpdateTime=currenttimeunixsec),clearInterval(tweeningInterval),tweeningInterval=setInterval(()=>{var t,e;updateTweenSpeedText(Math.sqrt(r**2+i**2)*(1e6/(a/o))),s>=o?clearInterval(tweeningInterval):!0===moving&&(e=n.lat+r*s,t=n.lng+i*s,e=L.latLng(e,t),santaMarker.setLatLng(e),s++)},a/o)}l=t.nextCity.basketsdelivered,!isNaN(parseFloat(l))&&isFinite(l)&&parseFloat(l).toLocaleString()}async function fetchMaxPresents(){try{var t;if((await fetch("/getmaxpresents")).ok)return t=await response.json(),console.log(t.maxpresents),t.maxpresents;throw new Error("Failed to fetch max presents")}catch(t){return console.error("Error fetching max presents:",t),null}}let intervalDuration=localStorage.getItem("intervalDuration"),eventSource=(intervalDuration?intervalDuration=parseInt(intervalDuration):(intervalDuration=75,localStorage.setItem("intervalDuration",intervalDuration)),panningInterval=setInterval(()=>{var t;console.log(isPanning),!0===isPanning&&(t=santaMarker.getLatLng(),t=L.latLng(t.lat,t.lng),map.panTo(t))},intervalDuration),new EventSource("/updates")),placedBaskets=(eventSource.onmessage=handleSSE,source=eventSource,[]);function celsiusToFahrenheit(t){return 9*t/5+32}function addBasket(e){function t(t){return parseFloat(t).toFixed(1)}var n,a,o,r,i;"pt"!==e.country&&(placedBaskets.some(t=>t[0]===e.latitude&&t[1]===e.longitude)?console.log("Basket already placed at these coordinates"):(n=L.marker([e.latitude,e.longitude],{icon:L.divIcon({className:"basket-icon",iconSize:[50,50],iconAnchor:[25,25],html:'<img src="https://github.com/Haydenlogs/sources/blob/main/comhiclipartydzgx-removebg-preview.png?raw=true" width="50px" height="50px">'})}).addTo(map),placedBaskets.push([e.latitude,e.longitude]),a=new Date(1e3*e.unixdeparture).toLocaleString(),o=e.Wikipedia_attr,i=e.wikipedia_link,r=e.weather?`
<strong>Weather:</strong> ${t(e.weather.temperature)}&#176; Celsius (${t(9*e.weather.temperature/5+32)}&#176; Fahrenheit)<br/>
${e.weather.description.toUpperCase()}
`:"Weather data is not available yet. Come back later for weather data.",i=60<i.length?i.substring(0,60)+"...":i,n.bindPopup(`
<div style="font-family: Arial, sans-serif; padding: 10px;">
<div style="display: flex; align-items: center;">
  <img src="${getFlagImageUrl(e.cc)}" id="flag5" width="20px;" style="margin-right: 10px;">
  <b>${e.city}, ${e.country}</b>
</div>
<div style="margin-top: 5px;">
  <strong>Arrival Time:</strong> ${a}
</div>
<div style="margin-top: 5px;">
  <a href="${o}" target="_blank" style="color: #007BFF; text-decoration: none;">${i}</a>
</div>
<div style="margin-top: 5px;">
  ${r}
</div>
</div>
`),n.on("click",function(){this.openPopup()})))}async function fetchBaskets(){try{var t=await(await fetch("/getbaskets")).json();console.log("Response data:",t),t.forEach(t=>{addBasket(t)})}catch(t){console.error("Error fetching baskets:",t)}}function toggleSettings(){var t=document.getElementById("settingsPopup");"block"===t.style.display?t.style.display="none":t.style.display="block"}function handleSSEEvent3(t){t=JSON.parse(t.data);let e=document.getElementById("announcementContainer"),n=document.getElementById("announcementMessage"),a=document.getElementById("announcementDetails"),o=(n.textContent=t.message,"");t.country&&(o+=", Country: "+t.country),t.targetIp&&(o+=", Target IP: "+t.targetIp),a.textContent=o,e.style.display="block",setTimeout(()=>{e.style.display="none"},1e3*t.time)}function yourFunctionToRunWhenTrackerEnds(){console.log("ENDED"),source.close(),window.location.href="/"}document.addEventListener("DOMContentLoaded",function(){let t=document.getElementById("popup-container"),e=document.getElementById("close-btn");localStorage.getItem("popupClosed")||t.classList.remove("hidden"),e.addEventListener("click",function(){t.classList.add("hidden"),localStorage.setItem("popupClosed","true")})}),console.log(source);